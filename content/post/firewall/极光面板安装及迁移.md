---
title: 极光面板安装及迁移
author: 要名俗气
type: post
date: 2023-06-09T22:08:05+00:00
url: /2023/jiguang-pannel-install-and-migrate
description: 极光面板是一个多服务器端口租用管理面板，你可以添加多台服务器及端口，并将其分配给任意注册用户，租户则可以很方便地使用被分配的端口来完成各种操作。支持IPv4以及IPv6。github地址：[极光面板](https://github.com/Aurora-Admin-Panel/deploy)。 准备工作 在正式安装极光面板之前需要在要安装的机器上准备以下工作： 1. 安装docker和docker-compose, 参考：[docker安装](https://www.iminling.com/2023/06/10/164.html "docker安装") 2. 生成ssh密钥。
image: https://images.iminling.com/app/hide.php?key=VE8yR2psZGRDY05xQlZsRmlJUzB5cTVjcERqTGZnTVNjNHFiU2g5SjJvazNMbUxNRjcrTFd3Si9PdDhTd3ViTGJBRHErTzg9
categories:
  - xray
tags:
  - 极光面板
---
极光面板是一个多服务器端口租用管理面板，你可以添加多台服务器及端口，并将其分配给任意注册用户，租户则可以很方便地使用被分配的端口来完成各种操作。支持IPv4以及IPv6。github地址：[极光面板](https://github.com/Aurora-Admin-Panel/deploy)。

## 准备工作

在正式安装极光面板之前需要在要安装的机器上准备以下工作：

  1. 安装docker和docker-compose, 参考：[docker安装](https://www.iminling.com/2023/06/10/164.html "docker安装")
  2. 生成ssh密钥。如果使用密码连接就不用生成

ssh密钥生成：

```bash
# 如果面板服务器并没有已经生成好的 ssh 密钥
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
# 后面一直回车，跳过设置 passphase 即可
# 然后还需要将面板服务器 ~/.ssh/id_rsa.pub 里面的内容复制到每一台被控机的 ~/.ssh/authorized_keys 文件中去。
```

准备工作好了以后就可以安装了。

## 安装

使用官方的安装命令：

```bash
mkdir -p ~/aurora && cd ~/aurora && wget https://raw.githubusercontent.com/Aurora-Admin-Panel/deploy/main/docker-compose.yml -O docker-compose.yml && docker compose up -d
# 创建管理员用户（密码必须设置8位以上，否则无法登陆）
docker-compose exec backend python app/initial_data.py
```

首先创建aurara目录，然后把官方的docker-compose.yaml文件下载下来，直接启动就可以了。

之后可以访问 `http://你的IP:8000` 进入面板。

之后就是添加机器以及添加端口转发。

## 迁移

使用了一段时间后，想把面板迁移到另一台机器，已经配置好的端口转发不想再配置一遍，所以就需要使用到迁移功能。迁移的步骤也比较简单，首先是要把原面板中的数据导出来，执行命令要在aurora目录下进行：

```bash
# docker-compose exec -T postgres pg_dump -d aurora -U [数据库用户名，默认aurora] -c > data.sql
docker compose exec -T postgres pg_dump -d aurora -U aurora -c > data.sql
```

然后把导出的data.sql传到新的要安装面板的机器上，在那边用同样的方法先安装面板(把上边的安装步骤完整的走一遍)，然后根据官方的迁移指引，在新安装面板的机器上的aurora目录执行以下命令：

```bash
# 首先先把所有服务停下
docker compose down
# 只启动数据库服务
docker compose up -d postgres
# 执行数据恢复
docker compose exec -T postgres psql -d aurora -U [数据库用户名，默认aurora] < data.sql
# 然后正常启动所有服务
docker compose up -d
```

等到所有容器都起来的时候，可以继续访问 `http://你的IP:8000` 进入面板。查看相关的数据是否也迁移过来了。安照步骤来我是已经可以正常迁移的。
