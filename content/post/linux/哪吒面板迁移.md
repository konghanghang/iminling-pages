---
title: 哪吒面板迁移
author: 要名俗气
type: post
date: 2023-03-28T06:48:18+00:00
url: /2023/nezha-pannel-migrate
description: 安装哪吒面板的机器是RN的一台小鸡，本来安装的是ubuntu系统，想换成debian系统，所以需要对哪吒面板的数据进行迁移，所以写此篇文章记录迁移过程。 迁移准备 参考哪吒面板官方的wiki，所有的数据都存放在目录下，所以需要备份一下此目录，下载到本地。
featured_image: /wp-content/uploads/2023/03/1680014761929-480x300.jpg
categories:
  - VPS
tags:
  - nezha
  - 哪吒面板
---
安装哪吒面板的机器是RN的一台小鸡，本来安装的是ubuntu系统，想换成debian系统，所以需要对哪吒面板的数据进行迁移，所以写此篇文章记录迁移过程。

## 迁移准备

参考哪吒面板官方的wiki，所有的数据都存放在`/opt/nezha`目录下，所以需要备份一下此目录，下载到本地。

> <h4 id="如何进行数据迁移、备份恢复？" tabindex="-1">
>   如何进行数据迁移、备份恢复？<a class="header-anchor" href="https://nezha.wiki/guide/q5.html#%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E3%80%81%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%EF%BC%9F" aria-hidden="true">#</a>
> </h4>
>
>   1. 先运行一键脚本，选择`停止面板`
>   2. 在旧服务器中打包`/opt/nezha`文件夹，复制到新环境相同位置解压
>   3. 在新环境中运行一键脚本，选择`启动面板`

## 迁移

将备份数据上传到新的服务器，解压到`/opt/nezha`目录下。通过`nezha.sh`启动面板。

配置通过域名访问面板：

nginx配置

```
server {
    listen       80;
    server_name  dashboard.baidu.com,tz.baidu.me;
    # ws配置
    location /ws {
        proxy_pass http://dashboard-dashboard-1:80;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
        proxy_set_header Host $host;
    }
    # 访问配置
    location / {
        proxy_pass http://dashboard-dashboard-1:80;
    }
}
```

整个迁移过程还是比较简单的，通过备份数据，整体迁移启动。记录一下。