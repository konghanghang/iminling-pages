<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Alist on 记录点滴 - 分享</title><link>https://www.iminling.com/tags/alist/</link><description>Recent content in Alist on 记录点滴 - 分享</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>iminling.com</copyright><lastBuildDate>Sat, 04 Jan 2025 09:48:58 +0000</lastBuildDate><atom:link href="https://www.iminling.com/tags/alist/index.xml" rel="self" type="application/rss+xml"/><item><title>私人影院之emby安装配置以及通过embyExternalUrl实现302播放</title><link>https://www.iminling.com/2025/emby-install-and-configuration/</link><pubDate>Sat, 04 Jan 2025 09:48:58 +0000</pubDate><guid>https://www.iminling.com/2025/emby-install-and-configuration/</guid><description>&lt;p>前两篇文章先讲了如何&lt;a class="link" href="https://www.iminling.com/2024/build-alist-server" title="私人影院之搭建自己的alist服务端并添加常见网盘"
target="_blank" rel="noopener"
>安装alist并添加常见网盘&lt;/a>，以及如何&lt;a class="link" href="https://www.iminling.com/2024/install-rclone-and-configuration" title="私人影院之rclone安装以及通过WebDav配置alist"
target="_blank" rel="noopener"
>把alist通过rclone挂载在本地硬盘&lt;/a>实现像本地文件一样进行浏览，本篇文章咱们继续，介绍如何安装emby并对媒体进行添加进emby.&lt;/p>
&lt;h2 id="emby安装">emby安装
&lt;/h2>&lt;p>要安装&lt;code>emby&lt;/code>首先要面临的就是&lt;code>emby&lt;/code>版本选择问题，&lt;code>emby&lt;/code>本身是一个收费软件，但是也有大佬们的破解版本，我这里选择&lt;code>amilys/embyserver&lt;/code> 这个版本，可以去&lt;a class="link" href="https://hub.docker.com/r/amilys/embyserver" target="_blank" rel="noopener"
>docker hub官方地址&lt;/a>查看。确认镜像后，下边给出我的&lt;code>docker-compose.yaml&lt;/code>配置文件:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mynet:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> external: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> emby:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: amilys/embyserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> container_name: emby
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restart: unless-stopped
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./config:/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /data/movies:/data/movies:rslave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 8096:8096
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> extra_hosts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - host.docker.internal:host-gateway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mynet
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>network不再多说了，自己创建的一个桥接网络。&lt;/p>
&lt;p>端口暴露&lt;code>8096&lt;/code>出去，&lt;/p>
&lt;p>&lt;code>emby&lt;/code>的配置文件在&lt;code>/config&lt;/code>目录，把它挂载到本地方便后续进行修改。&lt;/p>
&lt;p>另外一个挂载路径就是本地的&lt;code>/data/movies&lt;/code>挂载到容器的&lt;code>/data/movies&lt;/code>目录。本地的&lt;code>/data/movies&lt;/code>其实就是&lt;a class="link" href="https://www.iminling.com/2024/install-rclone-and-configuration" title="私人影院之rclone安装以及通过WebDav配置alist"
target="_blank" rel="noopener"
>上篇文章通过rclone处理的alist中所有的文件&lt;/a>。这里建议设置为一样的路径，方便后续在302播放的时候替换，不会遇到那么多麻烦。&lt;/p>
&lt;p>整体目录如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root@docker:~/emby# tree -L 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── docker-compose.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后就是启动容器&lt;code>docker compose up -d&lt;/code>进行&lt;code>emby&lt;/code>的配置了。&lt;/p>
&lt;h2 id="emby初始化">emby初始化
&lt;/h2>&lt;p>启动容器后，可以通过&lt;code>ip:8096&lt;/code>来访问刚启动的容器。下边来进行&lt;code>emby&lt;/code>的一些初始化配置，首先是进行语言配置，选择&lt;code>chinese simplified&lt;/code>(简体中文)，下一步&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/343bcb276a9239cfbfe2632f98431869.webp"
loading="lazy"
alt="welcome to emby"
>][4]&lt;/p>
&lt;p>设置完语言后就会提示创建用户,根据自己的需求创建用户以及设置用户名和密码。然后继续下一步&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/e34079b58c84d358b0b10600010bf47d.webp"
loading="lazy"
alt="emby create first user"
>][5]&lt;/p>
&lt;p>之后就会让添加一个媒体库，这里可以先不添加，直接下一步，等完全配置好了之后再去配置媒体库相关的东西&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/2850a779022a9f2d21557087d95c4918.webp"
loading="lazy"
alt="emby setup media libraries"
>][6]&lt;/p>
&lt;p>接下来是设置媒体库的偏好语言和地区，根据自己需求英文或者中文&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/5e7ca76938cf51d75aea26d7ede69d5d.webp"
loading="lazy"
alt="emby preferred metadata language"
>][7]&lt;/p>
&lt;p>下边是配置远程访问，开启就好了&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/75dd4f38f84ba4fcf93236952cc6db3c.webp"
loading="lazy"
alt="emby configure remote access"
>][8]&lt;/p>
&lt;p>下边是使用条例，接收继续下一步&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/b8b47310ae3e310e234c62e76082063a.webp"
loading="lazy"
alt="emby terms of use"
>][9]&lt;/p>
&lt;p>终于完成了,点击finish跳转。&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/482385e097fb3168905c196ccbd5de0d.webp"
loading="lazy"
alt="emby set done"
>][10]&lt;/p>
&lt;p>经过上边设置，emby就算是初始化好了，接下来就可以进行媒体库添加了。&lt;/p>
&lt;h2 id="媒体库">媒体库
&lt;/h2>&lt;p>进入到emby后台，找到媒体库菜单，就可以在这里进行添加媒体库了。&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/d2d55907036a51dcfebbfcb5bf16e67d.webp"
loading="lazy"
alt="emby 媒体库"
>][11]&lt;/p>
&lt;p>添加媒体库时需要整理好分类,是电影、电视节目还是其他，方便emby正确刮削。&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/26e630de1ab04c0f135433a22a44b09d.webp"
loading="lazy"
alt="emby add lib"
>][12]&lt;/p>
&lt;p>根据情况配置上边的选项，配置好后emby就会开始进行刮削，完整后就可以在emby首页看到添加的目录下的所有电影了。截止到现在emby已经可以正确的播放视频了，但是此时播放网盘的内容是会经过搭建alist那台机器，等于是那台机器把媒体内容下载下来，然后送给我们的播放器进行播放，如果alist部署在本地播放倒是什么没什么，反正都要下载下来。如果alist部署在其他vps上，流量消耗是一个比较大的问题。如果是部署在家里但是需要在家庭以外的地方播放，这时候流量也会经过家里然后才到你在外边的设备，播放速度就取决于你的家庭宽带的上行了，一般上行所以都不会太大，所以我们需要配置302重定向，让播放设备直接和网盘进行交互，而alist服务器只是负责给你列出目录树，供我们浏览使用。下边就来讲一下如何进行302播放。&lt;/p>
&lt;h2 id="embyexternalurl实现302播放">embyExternalUrl实现302播放
&lt;/h2>&lt;p>本文主要介绍使用&lt;a class="link" href="https://github.com/bpking1/embyExternalUrl" target="_blank" rel="noopener"
>embyExternalUrl&lt;/a>工具进行302播放。有大佬做了整合，弄了一个docker镜像：&lt;a class="link" href="https://github.com/thsrite/MediaLinker" target="_blank" rel="noopener"
>MediaLinker&lt;/a>，降低了操作的复杂度，并且支持ssl证书，可以根据需求进行配置。docker compose文件内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> medialinker:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> container_name: medialinker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: thsrite/medialinker:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restart: unless-stopped
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./data/:/opt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environment:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - AUTO_UPDATE=true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - SERVER=emby
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - NGINX_PORT=8091
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> network_mode: host
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>具体环境信息可以看大佬的介绍，我这里使用emby且也不需要SSL，如上是最简单的配置了。启动后，在data目录下会有一个constant.js文件，我们需要改变其中emby、alist的一些配置，需要配置的地方如下图：&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/6ccb5a1219098a3aaad0ec5b57963782.webp"
loading="lazy"
alt="embyExternalUrl setting"
>][15]&lt;/p>
&lt;p>根据上图可以看到有7项信息需要填写，主要分为两个大项，一个是emby的配置，一个是alist的配置。下边来详细说一下每个参数的配置。&lt;/p>
&lt;h3 id="emby配置">emby配置
&lt;/h3>&lt;p>emby需要三个参数，embyhost这个简单，就是我们打开emby的地址，安装的机器ip和docker-compose文件中的端口就可以了。&lt;/p>
&lt;p>embyApiKey需要在emby的后台去获取，路径如下，新建一个api密钥，然后填进去就可以了。&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/5c528a2719806da84c7a86ab030b801d.webp"
loading="lazy"
alt="emby api key"
>][16]&lt;/p>
&lt;p>mediaMountPath文件中介绍的也比较清楚：&lt;/p>
&lt;blockquote>
&lt;p>// 挂载工具 rclone/CD2 多出来的挂载目录, 例如将 od,gd 挂载到 /mnt 目录下: /mnt/onedrive /mnt/gd ,那么这里就填写 /mnt
// 通常配置一个远程挂载根路径就够了,默认非此路径开头文件将转给原始 emby 处理
// 如果没有挂载,全部使用 strm 文件,此项填[&amp;quot;&amp;quot;],必须要是数组&lt;/p>&lt;/blockquote>
&lt;p>我们在上边安装alis和emby的时候，两个内部路径都是&lt;code>/data/movies&lt;/code>，那么这个数组中就填&lt;code>/data/movies&lt;/code>.&lt;/p>
&lt;p>emby的配置就完成了。&lt;/p>
&lt;h3 id="alist配置">alist配置
&lt;/h3>&lt;p>host也比较简单，我们怎么访问alist的就怎么写，一般是ip:5244.&lt;/p>
&lt;p>alist-token的获取路径如下：&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/76f65a9b6c5bd8cf02ba0266985968c3.webp"
loading="lazy"
alt="alist api key"
>][17]&lt;/p>
&lt;p>然后是否启用了sign，这个在往alist配置每个网盘的时候，我这边都是有开启的，所以这个参数我需要设置为true.&lt;/p>
&lt;p>签名有效期，按照他提供的路径也很容易找到，默认是0，我这里也把他改成12，两边同步。&lt;/p>
&lt;p>然后保存&lt;code>constant.js&lt;/code>文件，此时需要再对&lt;code>medialinker&lt;/code>容器进行一次重启，如果不重启，mediaMountPath不生效。&lt;/p>
&lt;p>如何判断是否成功了呢？可以查看medialinker的日志，&lt;code>docker compose logs -tf&lt;/code> 来查看。如下我在第一次没有重启的情况去播放视频，看到有以下日志，找的还是默认的/mnt路径，并且可以看到我的服务器流量在疯狂的跑下行流量，说明是通过服务器下载后转给我的。&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/fe642d056ec75e3408f5fd37bce9cb12.webp"
loading="lazy"
alt="emby 302 error"
>][18]&lt;/p>
&lt;p>经过对容器进行重启后，再次去播放视频，可以看到以下日志，读取到了我配置的/data/movies.&lt;/p>
&lt;p>[&lt;img src="https://images.iminling.com/i/2025/01/04/3aa7c6fb04522303a5beb093a11f7eab.webp"
loading="lazy"
alt="emby 302 success"
>][19]&lt;/p>
&lt;p>经过以上就可以愉快的302直接播放云盘中的视频了。希望可以帮到大家。&lt;/p></description></item><item><title>私人影院之rclone安装以及通过WebDav配置alist</title><link>https://www.iminling.com/2024/install-rclone-and-configuration/</link><pubDate>Sun, 13 Oct 2024 02:04:10 +0000</pubDate><guid>https://www.iminling.com/2024/install-rclone-and-configuration/</guid><description>&lt;p>上一篇文章介绍了对&lt;a class="link" href="https://www.iminling.com/2024/build-alist-server" title="私人影院之搭建自己的alist服务端并添加常见网盘"
target="_blank" rel="noopener"
>alist的安装&lt;/a>，本篇文章则来介绍一下rclone把alist里挂载的网盘再套娃挂载到本地磁盘，为后续emby直接读取本地的挂载文件做准备。那么接下来就开始折腾rclone.&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/10/FE27085E1D15A96BA8B9CD0E182FA3C9.png"
loading="lazy"
alt="rclone "
>&lt;/p>
&lt;h2 id="配置文件">配置文件
&lt;/h2>&lt;p>本文使用docker compose来进行安装，可以&lt;a class="link" href="https://hub.docker.com/r/rclone/rclone" target="_blank" rel="noopener"
>docker-hub&lt;/a>找到rclone的官方镜像地址，安装可以参考rclone的官方&lt;a class="link" href="https://rclone.org/install/#docker" target="_blank" rel="noopener"
>安装教程&lt;/a>。&lt;/p>
&lt;p>先要把rclone的配置文件给配置好，我这里只配置alist，所以直接给出配置文件内容方便大家快速使用:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[alist]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type = webdav
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">url = http://alist:5244/dav
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vendor = other
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user = admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pass = x9WN7skj6o7_fqjd4F
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如上配置，&lt;/p>
&lt;p>[]中的名称自己定义一个，&lt;/p>
&lt;p>type固定为webdav，&lt;/p>
&lt;p>url为alist的webdav的url，url地址在&lt;a class="link" href="https://alist.nn.ci/zh/guide/webdav.html" target="_blank" rel="noopener"
>alist的文档&lt;/a>中也有说明，就是自己alist的ip+端口然后拼上/dav就可以了。&lt;/p>
&lt;p>vendor值为other&lt;/p>
&lt;p>user为自己的alist的用户名&lt;/p>
&lt;p>pass为自己的alist的用户名密码，但是密码需要进行加密才行，所以可以使用下边的命令来生成自己密码的密文，&lt;/p>
&lt;p>生成加密密码：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run --rm -it \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rclone/rclone \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> obscure [替换为具体的密码]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行命令后就会生成一个你密码的密文，然后替换在配置文件中就可以了。&lt;/p>
&lt;p>经过上边处理配置文件就处理好了，可以命名为&lt;code>rclone.conf&lt;/code>，rclone的默认配置文件名就是这个，如果名字改动了，则需要在下边docker-compose配置文件的挂载时特殊配置。方便下边docker-compose文件使用。&lt;/p>
&lt;h2 id="docker-compose">docker compose
&lt;/h2>&lt;p>老规矩，所有的应用程序都使用docker compose安装，下边是docker-compose.yaml的完整配置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mynet:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> external: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rclone:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: rclone/rclone:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> container_name: rclone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restart: always
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cap_add:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - SYS_ADMIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /dev/fuse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> security_opt:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apparmor:unconfined
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./config:/config/rclone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /data/movies:/data:shared
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /tmp:/tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> command: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;mount alist:/ /data --cache-dir /tmp --allow-other --vfs-cache-mode writes --allow-non-empty&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mynet
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>network网络配置我这里就不讲了，是我自己创建的一个桥接网络。&lt;/p>
&lt;p>这里主要说一下&lt;code>volumes&lt;/code>和&lt;code>command,&lt;/code> 其中&lt;code>cap_add&lt;/code>，&lt;code>devices&lt;/code>和&lt;code>security_opt&lt;/code>有兴趣的同学可以自己去研究他的含义，这里直接按照我给的配置文件就行了。&lt;/p>
&lt;p>volumes中&lt;code>/tmp&lt;/code>，临时文件存放在目录，在&lt;code>command&lt;/code>中指出了&lt;code>cache-dir&lt;/code>的位置，然后挂载到宿住机的/tmp.&lt;/p>
&lt;p>rclone的配置在容器的&lt;code>/config/rclone&lt;/code>目录下，我挂载到本地的config目录，把上边咱们生成的配置文件放在里边。&lt;/p>
&lt;p>&lt;code>/data/movies:/data&lt;/code>则是目录的配置，先是在&lt;code>command&lt;/code>中把咱们的远程alist中的/目录&lt;code>(alist:/)&lt;/code>和rclone容器中的&lt;code>/data&lt;/code>目录关联在一起，然后再通过volumes把容器中的&lt;code>/data&lt;/code>挂载在宿主机的&lt;code>/data/movies&lt;/code>下。通过这个目录挂载，咱们就可以在宿主机下&lt;code>/data/movies&lt;/code>中浏览alist中所有挂载的文件信息，为后边&lt;code>emby&lt;/code>添加影视库做准备。&lt;/p>
&lt;h2 id="容器启动">容器启动
&lt;/h2>&lt;p>上边的配置信息完成后，文件放到对应的目录下，我这边的目录结构如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root@docker:~/rclone# tree
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── rclone.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── docker-compose.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后在rclone目录下执行&lt;code>docker compose up -d&lt;/code>启动容器就可以了。&lt;/p>
&lt;p>如果配置没问题应该就可以在宿主机&lt;code>/data/movies&lt;/code>目录下看到alist中的网盘和所有文件了。&lt;/p>
&lt;p>以上就是折腾rclone和alist的过程，把alist挂载到本地，想本地目录文件一样来进行浏览，方便后续emby进行影视库的添加。&lt;/p></description></item><item><title>私人影院之搭建自己的alist服务端并添加常见网盘</title><link>https://www.iminling.com/2024/build-alist-server/</link><pubDate>Sat, 21 Sep 2024 09:56:03 +0000</pubDate><guid>https://www.iminling.com/2024/build-alist-server/</guid><description>&lt;p>前段时间写了一篇如何&lt;a class="link" href="https://www.iminling.com/2024/how-to-build-xiaoya-alist-and-use" title="搭建属于自己的影视小站：小雅Alist安装及使用"
target="_blank" rel="noopener"
>搭建小雅alist&lt;/a>的文章，使用小雅的媒体库来进行观影，但是这种有一个问题就是小雅的库更新的不是很快，而且如果我想在电视上观看比较麻烦，就算搭配emby,也无法避免资源更新慢的问题。所以就想着使用自己的网盘配合自己搭建的alist服务端，来进行资源快速入库，方便自己快速观看。那么接下来就详细说明一下自己的搭建过程。&lt;/p>
&lt;h2 id="alist服务端">alist服务端
&lt;/h2>&lt;p>我这里使用&lt;code>docker compose&lt;/code>来搭建&lt;code>alist server&lt;/code>,alist提供了两个版本的镜像，一个是普通的版本，一个是带aria2下载的版本，根据自己的需求进行安装，安装文档参考&lt;a class="link" href="https://alist.nn.ci/zh/guide/install/docker.html" target="_blank" rel="noopener"
>官方文档&lt;/a>。&lt;/p>
&lt;p>我的docker-compose.yaml如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mynet:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> external: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> alist:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: xhofe/alist-aria2:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> container_name: alist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restart: unless-stopped
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./data:/opt/alist/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mynet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 15244:5244
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> extra_hosts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - host.docker.internal:host-gateway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environment:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - PUID=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - PGID=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - UMASK=022
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - TZ=Asia/Shanghai
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我的目录分配如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── docker-compose.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>整体配置是比较简单的，我使用了自己的网络&lt;code>mynet&lt;/code>，而不是让docker自建一个网络，方便后续容器之间的项目访问。&lt;/p>
&lt;p>按照上边配置好后直接&lt;code>docker compose up -d&lt;/code>运行起来容器。之后通过访问ip:15244(我这里映射到主机的15244端口了)，默认admin用户和密码，进行登录并修改密码。容器启动成功，alist的服务端搭建就算完成了。&lt;/p>
&lt;h2 id="网盘添加">网盘添加
&lt;/h2>&lt;p>我这里主要添加三种类型，天翼云盘，115网盘，本地smb，下边就看一下每种网盘是需要怎么来添加。&lt;/p>
&lt;h3 id="天翼云盘">天翼云盘
&lt;/h3>&lt;p>我家里使用的是电信的宽带，送了天翼网盘的会员，个人和家庭分别是4TB，整体也不算少。&lt;/p>
&lt;p>进入到alist的管理界面&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/09/12346FDFD92375CFACA05F8AE99636F2.png"
loading="lazy"
alt="alist disk"
>&lt;/p>
&lt;p>点击存储-添加,然后选择&lt;code>天翼云盘客户端&lt;/code>(官方建议的类型)。然后就可以看到很多选项需要填写，具体的填写操作步骤参考&lt;a class="link" href="https://alist.nn.ci/zh/guide/drivers/189.html" target="_blank" rel="noopener"
>官方文档&lt;/a>。&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/09/643C95E88930EA3944C1185A24EBB379.png"
loading="lazy"
alt="alist add 189"
>&lt;/p>
&lt;p>挂载路径是最终显示在alist主页的名称，需要唯一。&lt;/p>
&lt;p>缓存过期时间根据自己的需求来定义，比如我添加了一个文件想要快一点能刷新出来，那么我就定义短一点(比如1分钟)，这个根据自己需求来定。&lt;/p>
&lt;p>WebDAV策略建议都使用302重定向，这样子在通过WebDAV访问alist服务端的内容的时候，实际上会重定向到网盘内真实的路径，等于直接访问网盘。&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/09/35D3FFFECD6E46B2E2B13B4C3082C901.png"
loading="lazy"
alt="alist add 189"
>&lt;/p>
&lt;p>启用签名选项如果后续是需要配合emby实现302播放，&lt;strong>一定要打开，一定要打开，一定要打开&lt;/strong>。&lt;/p>
&lt;p>用户名就是天翼云盘登录的手机号。&lt;/p>
&lt;p>密码是天翼云盘登录的密码。&lt;/p>
&lt;p>根文件的id根据自己需求，如果只是想把网盘内的某一个目录添加到alist中，那就按照&lt;a class="link" href="https://alist.nn.ci/zh/guide/drivers/189.html" target="_blank" rel="noopener"
>官方文档&lt;/a>里的方法找到对应的文件夹id。&lt;/p>
&lt;p>类型有&lt;code>家庭云&lt;/code>和&lt;code>个人云&lt;/code>，&lt;code>family id&lt;/code>在是选择&lt;code>家庭云&lt;/code>的时候需要填写，官网里都有介绍。我这里就是&lt;code>家庭云&lt;/code>。&lt;/p>
&lt;p>基本上述搞定就可以添加成功了。&lt;/p>
&lt;h3 id="115网盘">115网盘
&lt;/h3>&lt;p>基本和天翼云盘添加流程差不多，驱动类型选择&lt;code>115网盘&lt;/code>,挂载路径、缓存过期时间、WebDAV策略、启用签名四个选项和天翼云盘意向逻辑，进行处理就行了。有不明白的可以参考&lt;a class="link" href="https://alist.nn.ci/zh/guide/drivers/115.html" target="_blank" rel="noopener"
>官方文档&lt;/a>。&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/09/3D235946E3F03628AFC314D9E2018E98.png"
loading="lazy"
alt="alist add 115"
>&lt;/p>
&lt;p>cookie和Qrcode二选一，&lt;a class="link" href="https://alist.nn.ci/zh/guide/drivers/115.html#_1-qrcode-%E6%89%AB%E7%A0%81%E6%96%B9%E5%BC%8F%E7%99%BB%E5%BD%95" target="_blank" rel="noopener"
>官方文档&lt;/a>也有详细的介绍，包括根文件夹ID，都有详细的介绍，参考文档就可以了。感觉Qrcode会简单一点。我是直接使用的抓包软件抓的应用的cookie。这里有一个事项需要注意一下，如果使用了手机端软件，后续在网页登录的时候最好选择用手机扫码登录，要不然可能会把手机应用端挤掉导致cookie失效。&lt;/p>
&lt;h3 id="smb添加">SMB添加
&lt;/h3>&lt;p>有些文件没有放在网盘，而是放在自己本地或者放在本地nas中，比如我上篇文档也介绍了&lt;a class="link" href="https://www.iminling.com/2024/pve-install-nas" title="Proxmox VE(PVE)8.0安装黑群晖NAS并直通硬盘"
target="_blank" rel="noopener"
>如何安装黑群晖&lt;/a>，这样子想要在alist中把nas中的资源添加进去，就需要使用到SMB一些了，nas中是有开启这个功能的。&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/09/6BFD9B721FB31AFA57FF87D6CF084938.png"
loading="lazy"
alt="alist add smb nas"
>&lt;/p>
&lt;p>添加驱动类型选择&lt;code>SMB&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/09/08EBBBA8CC68A83179643B66EBDB09EE.png"
loading="lazy"
alt="alist add smb nas"
>&lt;/p>
&lt;p>smb是本地文件，启用签名就可以不用开了。地址、用户名、密码和分享名称(smb中的目录)根据自己的需求填写就可以了。&lt;/p>
&lt;h2 id="总结">总结
&lt;/h2>&lt;p>我这里介绍了三种网盘的添加方式，其他的网盘也都大同小异，比如添加阿里云盘等。那么搭建alist服务端并添加网盘，就介绍到这里。希望可以帮到大家。&lt;/p>
&lt;p>接下来还会介绍利用rclone挂载alist，然后让emby来使用并实现302播放。&lt;/p></description></item><item><title>搭建属于自己的影视小站：小雅Alist安装及使用</title><link>https://www.iminling.com/2024/how-to-build-xiaoya-alist-and-use/</link><pubDate>Sat, 20 Apr 2024 06:39:56 +0000</pubDate><guid>https://www.iminling.com/2024/how-to-build-xiaoya-alist-and-use/</guid><description>&lt;p>之前一直在使用其他的影视站去看一些电影，这些影视站基本网速都比较慢，画质也都一般，观看体验也不怎么好，这里顺便也分享一下我一直使用的影视站：&lt;a class="link" href="https://www.549.tv/" target="_blank" rel="noopener"
>影视森林&lt;/a>，该站整理了一些比较不错的影视站。偶然的机会下了解到了小雅(xiaoya)Alist，搭配阿里云盘简直不要太爽，作者也在一直更新资源，非常推荐自己搭建，下边就简单介绍一下我的搭建过程以及一些使用。&lt;/p>
&lt;h2 id="准备工作">准备工作
&lt;/h2>&lt;p>在进行安装前需要先获取三个东西：token,open token以及folder id,下边介绍一下如何获取这几个信息。另外需要在机器上安装docker，因为小雅Alist是使用docker镜像来安装的，如果本机还没有安装docker,可以参考我的文章：&lt;a class="link" href="https://www.iminling.com/2023/06/10/164.html" title="docker安装"
target="_blank" rel="noopener"
>docker安装&lt;/a> 来安装docker。&lt;/p>
&lt;h3 id="token">token
&lt;/h3>&lt;p>打开网站：&lt;a class="link" href="https://aliyuntoken.vercel.app/" target="_blank" rel="noopener"
>https://aliyuntoken.vercel.app/&lt;/a>，会出现二维码，使用手机端的阿里云盘扫描就可以获取到token。先记录下。&lt;/p>
&lt;h3 id="open-token">open token
&lt;/h3>&lt;p>打开网站：&lt;a class="link" href="https://alist.nn.ci/tool/aliyundrive/request.html" target="_blank" rel="noopener"
>Get Aliyundrive Refresh Token&lt;/a>，首先点击&lt;code>Scan QrCode&lt;/code>获取二维码，然后使用手机端阿里云盘扫描，扫描完成后再点击&lt;code>I have scan&lt;/code> 来获取&lt;code>refresh token&lt;/code>。同时记录下这个token。&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/04/56ECF1D6D2882D49983EC43FFEEB4BC7.png"
loading="lazy"
alt="aliyun refresh token"
>&lt;/p>
&lt;h3 id="folder-id">folder id
&lt;/h3>&lt;p>打开小雅的分享地址：&lt;a class="link" href="https://www.alipan.com/s/rP9gP3h9asE" target="_blank" rel="noopener"
>https://www.alipan.com/s/rP9gP3h9asE&lt;/a>，将里边的内容转存到自己的网盘下，选择资源库。&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/04/F06E1DE419C12BD3D4F5A0E45E14236C.png"
loading="lazy"
alt="aliyun share save"
>&lt;/p>
&lt;p>然后进入到自己的&lt;a class="link" href="https://www.alipan.com/" target="_blank" rel="noopener"
>阿里云盘&lt;/a>，打开刚才转存的目录，看地址栏，最后那一串字符串就是需要的folder id.记录改folder id.&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/04/4C4D087E902BDF21AA67098CB4264DE1.png"
loading="lazy"
alt="xiaoya folder id"
>&lt;/p>
&lt;p>经过上边几步，已经准备好了所需要的三个必须信息，下边就开始安装小雅Alist。&lt;/p>
&lt;h2 id="小雅alist安装">小雅Alist安装
&lt;/h2>&lt;p>安装有几种方式，小雅也有提供一键安装脚本，比较方便，下边我介绍一下几种安装方式。&lt;/p>
&lt;h3 id="一键脚本">一键脚本
&lt;/h3>&lt;p>这种方式最简单，在获取了上边的信息后，就可以直接在vps或者自己的电脑上进行安装，打开命令窗口(终端)执行一键安装脚本：bash -c &amp;ldquo;$(curl &lt;a class="link" href="http://docker.xiaoya.pro/update_new.sh%29%22" target="_blank" rel="noopener"
>http://docker.xiaoya.pro/update_new.sh)"&lt;/a>，执行后会提示输入token（32位）、open Token也就是刚才的refresh Token(335位)以及folder id(40位)，输入完成后就开始了安装，等待结束就可以了。通过docker 命令&lt;code>docker ps&lt;/code>来查看安装情况,看是否有一个容器名称为&lt;code>xiaoya&lt;/code>,存在就说明安装成功。&lt;/p>
&lt;p>一键脚本安装的小雅默认配置文件是在&lt;code>/etc/xiaoya&lt;/code>目录下，后续的配置文件都需要往这个文件下配置。&lt;/p>
&lt;h3 id="docker命令">docker命令
&lt;/h3>&lt;p>上边介绍了一键脚本，本质上也是使用docker命令来安装的，如果我们想要自己控制配置放在什么地址，可以把脚本下载下来自行修改，或者来进行docker的配置安装。&lt;/p>
&lt;p>比如我想把配置文件放在&lt;code>/data/xiaoya&lt;/code>下，那么我需要在&lt;code>data/xiaoya&lt;/code>目录下先新建三个文件:&lt;/p>
&lt;ol>
&lt;li>&lt;code>mytoken.txt&lt;/code>：把信息准备中的token字符串放在这个文件里。&lt;/li>
&lt;li>&lt;code>myopentoken.txt&lt;/code>：把信息准备中的refresh Token字符串放在这个文件里&lt;/li>
&lt;li>
&lt;div>
&lt;div>
&lt;code>temp_transfer_folder_id.txt&lt;/code>：把folder id字符串放在这个文件里。
&lt;/div>
&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>&amp;lt;/div&amp;gt;
&amp;lt;div&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>此时准备工作就完成了，可以来使用命令来安装小雅了：&lt;/p>
&lt;div>
&lt;div>
&lt;code>docker run -d --network=host -v /data/xiaoya:/data --restart=always --name=xiaoya xiaoyaliu/alist:hostmode&lt;/code>,等待安装完成，同样通过&lt;code>docker ps&lt;/code>来查看是否启动成功，后续所有的配置文件都放在&lt;code>/data/xiaoya&lt;/code>目录下。
&lt;/div>
&lt;h3>
docker compose安装
&lt;/h3>
&lt;p>
这种是我最常用的方式，容器的配置都放在compose文件中，方便管理。和docker安装差不多，也是先需要将三个文件创建出来，目录结构如下：
&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root@docker:~/xiaoya# tree -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── docker_address.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── myopentoken.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── mytoken.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── temp_transfer_folder_id.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── docker-compose.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>
docker-compose.yaml文件内容如下：
&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root@docker:~/xiaoya# cat docker-compose.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: &amp;#39;3.9&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> xiaoya:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: xiaoyaliu/alist:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> container_name: xiaoya
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> env_file:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - .env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restart: unless-stopped
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 5678:80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 2345:2345
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 2346:2346
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./data:/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environment:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - TZ=Asia/Shanghai
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>
然后在&lt;code>~/xiaoya&lt;/code>目录下执行 &lt;code>docker compose up -d&lt;/code>启动就可以了。
&lt;/p>
&lt;/div>
&lt;p>经过上边的安装已经可以通过你的&lt;code>机器ip:5678&lt;/code>来访问了。&lt;/p>
&lt;p>&lt;img src="https://www.iminling.com/wp-content/uploads/2024/04/B00FCE6AB9BD68DF013650341B6BDF55.png"
loading="lazy"
alt="alist index"
>&lt;/p>
&lt;div>
&lt;h2>
播放
&lt;/h2>
&lt;p>
经过上边安装默认情况下已经可以正常使用了，在网页端找到自己想观看的电影，直接在网页端观看，或者在视频播放器下边的按钮里选择自己本地已安装的程序打开进行播放,例如下边有iina,VLC等播放器，自己在本地安装就可以了。
&lt;/p>
&lt;p>
![alist play](https://www.iminling.com/wp-content/uploads/2024/04/2B446AD735475942885308A513786C76.png)
&lt;/p>
&lt;p>
也可以在小雅Alist中找到对应的安装包，也提供了很多播放器的安装包：
&lt;/p>
&lt;p>
![alist software](https://www.iminling.com/wp-content/uploads/2024/04/A5DB9AE8F4DCCC40B6E7D4CF0CD6BAEA.png)
&lt;/p>
&lt;h3>
安卓手机
&lt;/h3>
&lt;p>
想要在安卓手机上使用alist,我是使用tvbox来观看的，在小雅Alist提供的安装包里也是有tvbox的，需要在配置文件目录新建一个&lt;code>docker_address.txt&lt;/code>文件，里边填写http://xxxxx:5678，网址最后不需要/, xxx替换为自己的vps的ip，或者搭建机器的内网ip。
&lt;/p>
&lt;p>
安卓手机正常安装后进行配置：http://xxxxx:5678/tvbox/my.json。
&lt;/p>
&lt;p>
![tvbox setting](https://www.iminling.com/wp-content/uploads/2024/04/8C14BC01703C12A9BAA1DB2B9F3702D2.png)
&lt;/p>
&lt;p>
如果同时有内网以及外网地址，那么想要在公网访问，则需要再多建一个&lt;code>docker_address_ext.txt&lt;/code>,里边需要填写公网的&lt;code>ip:端口&lt;/code>,然后在tvbox中进行配置:http://xxxxx:5678/tvbox/my_ext.json就可以了。
&lt;/p>
&lt;h3>
电视端
&lt;/h3>
&lt;p>
其实和安卓端是一样的，安装tvbox(安装包也是在小雅Alist中获取)，按照安卓的配置方式，进行配置后就可以观看了。
&lt;/p>
&lt;h2>
配置
&lt;/h2>
&lt;h3>
登录配置
&lt;/h3>
&lt;p>
如果你搭建的机器是公网的，又不想别人随便使用，可以通过配置，需要使用账号和密码来登录，需要在配置文件目录添加两个文件:&lt;code>guestlogin.txt&lt;/code>,和&lt;code>guestpass.txt&lt;/code>两个文件，&lt;code>guestlogin.txt&lt;/code>控制Alist网页端需要登录，只是一个空文件就可以了，&lt;code>guestpass.txt&lt;/code>里边内容是登录密码，这样子访问你的Alist就需要账号和密码了，账号是：dav，密码是&lt;code>guestpass.txt&lt;/code>中的内容。
&lt;/p>
&lt;/div>
&lt;p>其他配置暂时也没有使用到，后续有使用到再进行更新，祝大家都能顺利安装成功。&lt;/p></description></item></channel></rss>